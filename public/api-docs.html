<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taoç”µå•†å¹³å° API æ–‡æ¡£</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui.min.css" />
    <style>
        html {
            box-sizing: border-box;
            overflow: -moz-scrollbars-vertical;
            overflow-y: scroll;
        }

        *, *:before, *:after {
            box-sizing: inherit;
        }

        body {
            margin: 0;
            background: #fafafa;
        }

        .swagger-ui .topbar {
            background-color: #2d2d2d;
        }

        .swagger-ui .topbar .download-url-wrapper .select-label select {
            min-width: 130px;
        }

        .custom-header {
            background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
            color: white;
            padding: 20px;
            text-align: center;
            border-bottom: 2px solid #f39c12;
        }

        .custom-header h1 {
            margin: 0;
            color: #f39c12;
            font-size: 2em;
        }

        .custom-header p {
            margin: 10px 0 0 0;
            opacity: 0.8;
        }

        .api-info {
            background: white;
            padding: 20px;
            margin: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .api-info h2 {
            color: #2d2d2d;
            border-bottom: 2px solid #f39c12;
            padding-bottom: 10px;
        }

        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #f39c12;
        }

        .feature-item h3 {
            margin: 0 0 10px 0;
            color: #2d2d2d;
        }

        .feature-item p {
            margin: 0;
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="custom-header">
        <h1>ğŸª Taoç”µå•†å¹³å° API æ–‡æ¡£</h1>
        <p>åŸºäºCloudflare Workersçš„ç°ä»£åŒ–ç”µå•†å¹³å°API</p>
    </div>

    <div class="api-info">
        <h2>ğŸ“‹ API æ¦‚è§ˆ</h2>
        <p>æœ¬æ–‡æ¡£æä¾›äº†Taoç”µå•†å¹³å°æ‰€æœ‰APIæ¥å£çš„è¯¦ç»†è¯´æ˜ï¼ŒåŒ…æ‹¬è®¤è¯ã€äº§å“ç®¡ç†ã€åˆ†ç±»ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ç­‰åŠŸèƒ½æ¨¡å—ã€‚</p>
        
        <div class="feature-list">
            <div class="feature-item">
                <h3>ğŸ” è®¤è¯ç³»ç»Ÿ</h3>
                <p>åŸºäºJWTçš„å®‰å…¨è®¤è¯ï¼Œæ”¯æŒç®¡ç†å‘˜ç™»å½•å’Œæƒé™éªŒè¯</p>
            </div>
            <div class="feature-item">
                <h3>ğŸ“¦ äº§å“ç®¡ç†</h3>
                <p>å®Œæ•´çš„äº§å“CRUDæ“ä½œï¼Œæ”¯æŒå¤šè¯­è¨€å’Œåª’ä½“æ–‡ä»¶ç®¡ç†</p>
            </div>
            <div class="feature-item">
                <h3>ğŸ“‚ åˆ†ç±»ç®¡ç†</h3>
                <p>äº§å“åˆ†ç±»çš„å¢åˆ æ”¹æŸ¥ï¼Œæ”¯æŒä¸­è‹±æ–‡åŒè¯­åˆ†ç±»</p>
            </div>
            <div class="feature-item">
                <h3>ğŸ‘¥ ç”¨æˆ·ç®¡ç†</h3>
                <p>ç”¨æˆ·ä¿¡æ¯ç®¡ç†ï¼ŒåŒ…æ‹¬è§’è‰²å’ŒçŠ¶æ€æ§åˆ¶</p>
            </div>
            <div class="feature-item">
                <h3>ğŸ¬ åª’ä½“ç®¡ç†</h3>
                <p>äº§å“å›¾ç‰‡å’Œè§†é¢‘çš„ä¸Šä¼ ã€ç®¡ç†å’Œä¼˜åŒ–</p>
            </div>
            <div class="feature-item">
                <h3>ğŸŒ å¤šè¯­è¨€æ”¯æŒ</h3>
                <p>å®Œæ•´çš„ä¸­è‹±æ–‡åŒè¯­æ”¯æŒï¼Œè¦†ç›–æ‰€æœ‰æ•°æ®æ¨¡å‹</p>
            </div>
        </div>

        <h2>ğŸš€ å¿«é€Ÿå¼€å§‹</h2>
        <ol>
            <li><strong>è·å–è®¤è¯ä»¤ç‰Œï¼š</strong>ä½¿ç”¨ <code>POST /api/auth/login</code> æ¥å£è¿›è¡Œç®¡ç†å‘˜ç™»å½•</li>
            <li><strong>è®¾ç½®è¯·æ±‚å¤´ï¼š</strong>åœ¨åç»­è¯·æ±‚ä¸­æ·»åŠ  <code>Authorization: Bearer &lt;token&gt;</code> å¤´</li>
            <li><strong>å¼€å§‹ä½¿ç”¨ï¼š</strong>ä½¿ç”¨ä¸‹æ–¹çš„APIæ–‡æ¡£è¿›è¡Œæ¥å£è°ƒç”¨</li>
        </ol>

        <h2>ğŸ”‘ è®¤è¯è¯´æ˜</h2>
        <p>å¤§éƒ¨åˆ†APIéœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œè¯·åœ¨è¯·æ±‚å¤´ä¸­åŒ…å«æœ‰æ•ˆçš„JWTä»¤ç‰Œï¼š</p>
        <pre><code>Authorization: Bearer &lt;your-jwt-token&gt;</code></pre>

        <h2>ğŸŒŸ æ–°å¢åŠŸèƒ½</h2>
        <p>æœ¬æ¬¡æ›´æ–°æ–°å¢äº†å®Œæ•´çš„<strong>åˆ†ç±»ç®¡ç†API</strong>ï¼ŒåŒ…æ‹¬ï¼š</p>
        <ul>
            <li>ğŸ“‹ è·å–åˆ†ç±»åˆ—è¡¨ - <code>GET /api/admin/categories</code></li>
            <li>â• åˆ›å»ºæ–°åˆ†ç±» - <code>POST /api/admin/categories</code></li>
            <li>âœï¸ æ›´æ–°åˆ†ç±»ä¿¡æ¯ - <code>PUT /api/admin/categories/{id}</code></li>
            <li>ğŸ—‘ï¸ åˆ é™¤åˆ†ç±» - <code>DELETE /api/admin/categories/{id}</code></li>
        </ul>
        <p>æ‰€æœ‰åˆ†ç±»APIéƒ½æ”¯æŒä¸­è‹±æ–‡åŒè¯­æ“ä½œï¼Œå¹¶é›†æˆåœ¨äº§å“ç®¡ç†ç•Œé¢ä¸­ã€‚</p>
    </div>

    <div id="swagger-ui"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-standalone-preset.min.js"></script>
    <script>
        window.onload = function() {
            // æ„å»ºSwagger UIé…ç½®
            const ui = SwaggerUIBundle({
                url: '/swagger.json',
                dom_id: '#swagger-ui',
                deepLinking: true,
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIStandalonePreset
                ],
                plugins: [
                    SwaggerUIBundle.plugins.DownloadUrl
                ],
                layout: "StandaloneLayout",
                validatorUrl: null,
                tryItOutEnabled: true,
                supportedSubmitMethods: ['get', 'post', 'put', 'delete', 'patch'],
                onComplete: function() {
                    console.log('Swagger UI åŠ è½½å®Œæˆ');
                },
                onFailure: function(error) {
                    console.error('Swagger UI åŠ è½½å¤±è´¥:', error);
                },
                docExpansion: 'list',
                apisSorter: 'alpha',
                operationsSorter: 'alpha',
                defaultModelsExpandDepth: 1,
                defaultModelExpandDepth: 1,
                showExtensions: true,
                showCommonExtensions: true,
                requestInterceptor: function(request) {
                    // åœ¨è¯·æ±‚å‘é€å‰æ‹¦æˆªï¼Œå¯ä»¥æ·»åŠ é€šç”¨çš„è®¤è¯å¤´ç­‰
                    console.log('å‘é€APIè¯·æ±‚:', request.url);
                    return request;
                },
                responseInterceptor: function(response) {
                    // åœ¨å“åº”æ¥æ”¶åæ‹¦æˆª
                    console.log('æ”¶åˆ°APIå“åº”:', response.status, response.url);
                    return response;
                }
            });

            // æ·»åŠ è‡ªå®šä¹‰æ ·å¼
            const style = document.createElement('style');
            style.textContent = `
                .swagger-ui .info .title {
                    color: #f39c12;
                }
                .swagger-ui .scheme-container {
                    background: #f8f9fa;
                    border: 1px solid #dee2e6;
                }
                .swagger-ui .opblock.opblock-post {
                    border-color: #28a745;
                    background: rgba(40, 167, 69, 0.1);
                }
                .swagger-ui .opblock.opblock-get {
                    border-color: #007bff;
                    background: rgba(0, 123, 255, 0.1);
                }
                .swagger-ui .opblock.opblock-put {
                    border-color: #ffc107;
                    background: rgba(255, 193, 7, 0.1);
                }
                .swagger-ui .opblock.opblock-delete {
                    border-color: #dc3545;
                    background: rgba(220, 53, 69, 0.1);
                }
            `;
            document.head.appendChild(style);
        };
    </script>
</body>
</html>